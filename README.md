# BasicControlSystem-mcdatapack
Basic Control Systemはマインクラフトでバトルロワイアルを遊ぶために開発されたデータパックです。

このデータパックは専用のワールドに合わせて開発されたため、他のワールドにそのまま使用することができません。
他のワールドで使用するには、各種コマンドを使用するワールドに合わせて修正する必要があります。

2年以上前から制作を始め、完成してから1年以上経過しているため(2021年1月時点)、私自身仕様を忘れてしまっている部分が多くあります。
公開にあたり、本データパックの構造と仕様をできる限り、随時記していきます。コマンドの参考にでもご利用ください。

## 2021/02/01 bcs解説
BasicControlSystem（以降bcs）はf3.0→ 1.0→ renewed1.0という順にナンバリングが進んでいます。
また1.0より先のコミットから、使用するワールドが変更されて、座標・ワールドの範囲を扱うコマンドが大幅に編集されているはずです。確認できてないので、フォルダの状況からの予想になりますが。

古いコミットの解説はすっ飛ばして、一番最新のコミットから解説していきます。  
まず、ほぼすべてのファンクションは〈./data/minecraft/tags/functions〉に記述されている〈bcs:control〉で制御されています。なので、〈bcs:control.mcfunction〉を辿っていけばすべての仕様を把握することができるはず……ですが、フォルダ構成がむちゃくちゃ複雑なので、少しだけわかりやすくするために解説します。

ちなみに、〈./data/bcs〉の古いフォルダ名は〈./data/system〉です。他のデータパックとの競合を避けるために、自分のデータパック名の短縮形を名前空間に変更しています。データパックの名前空間が被ることなんてめったにないと思いますけどね。

* **functionsフォルダ直下：**  
functionsフォルダにはgame、library、mainのフォルダがあり、gameにはゲームをするのに必要なコマンド、libraryにはほかのゲームにも使える汎用的なコマンドが入っています。mainにはログイン関連のコマンドが入っています。最新のコミットからは削除されていますが、古いバージョンにはバトロワ以外に、デスマッチのゲームも実装されていました。

| フォルダ名 | 仕様                                                   |
| ---------- | ------------------------------------------------------ |
| game       | ゲームに必要なコマンドが入っています。                 |
| library    | 他のゲームにも使える、汎用可能なコマンドが入っています。 |
| main       | ログイン関連の制御コマンドが入っています。             |

* **スコアボードの解説**  
詳しくはsetup.mcfunctionと、〈./library/general/initial_settings/scoreboard.mcfunction〉を参照ください。
以下に軽いbcs.controlオブジェクトの変数の解説を載せておきます。

| 変数名        | 仕様                                                         |
| ------------- | ------------------------------------------------------------ |
| game          | どのゲームを設定中か判定するための変数です。主にcontrol.mcfunctionで使用しています |
| phase         | ゲームの進行を格納します。                                   |
| players       | プレイヤー人数を格納します。                                 |
| return        | 戻り値を格納します。                                         |
| remove_column | スコアから特定の桁を抜き出すための変数です。                 |
| select_column | スコアから特定の桁を抜き出すための変数です。                 |
| time_m,s,t    | タイマー用の変数です。                                       |

libraryフォルダのscoreboardにselect,remove_column変数を用いたコマンドがあるのですが、処理がばかすぎるので見ないでください……

* **control.mcfunction:**  
スコアボードの解説を踏まえてcontrol.mcfunctionを見ると、10~12行目のコマンドの意味が分かると思います。game変数が2のとき、バトロワのcontrolが動いています。このバトロワのcontrolを辿っていけば、仕組みが理解できるはずです。あとは頑張ってくだあし。
